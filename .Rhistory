mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('models_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
mutate(value_short = str_extract(value, pattern='^[^:\\.)]*')) %>%
# this works but regex whiz may do it much more elegantly
mutate(value_short = ifelse(str_detect(value_short,"\\((?=e)"),
str_sub(value_short,1,-1 -2),
value_short)) %>%
mutate(value_short = ifelse(str_detect(value_short,"\\("),
str_c(value_short,")"),
value_short)) %>%
group_by(value_short) %>%
summarise(N = length(value_short)) %>%
arrange(N) %>%
mutate(value_short=as_factor(value_short)) %>%
ggplot(aes(y=value_short, x=N))+
theme_gray(12) +
geom_col() +
labs(x="N people")
d %>%
filter(Finished==TRUE) %>%
select(starts_with('models_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('models_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
mutate(value_short = str_extract(value, pattern='^[^:\\.)]*')) %>%
# this works but regex whiz may do it much more elegantly
mutate(value_short = ifelse(str_detect(value_short,"\\((?=e)"),
str_sub(value_short,1,-1 -2),
value_short)) %>%
mutate(value_short = ifelse(str_detect(value_short,"\\("),
str_c(value_short,")"),
value_short)) %>%
group_by(value_short) %>%
summarise(N = length(value_short)) %>%
arrange(N) %>%
mutate(value_short=as_factor(value_short)) %>%
ggplot(aes(y=value_short, x=N))+
theme_gray(12) +
geom_col() +
labs(y="")
install.packages("wordcloud")
# 2
d %>%
filter(Finished==TRUE) %>%
select(starts_with('models_') & contains('TEXT'))
# 2
d %>%
filter(Finished==TRUE) %>%
select(starts_with('models_') & contains('TEXT')) %>%
filter(!is.na(everything()))
# 2
d %>%
filter(Finished==TRUE) %>%
select(starts_with('models_') & contains('TEXT')) %>%
filter(!is.na())
# 2
d %>%
filter(Finished==TRUE) %>%
select(starts_with('models_') & contains('TEXT')) %>%
filter(!is.na(models_17_TEXT))
# 2
d %>%
filter(Finished==TRUE) %>%
select(starts_with('models_') & contains('TEXT')) %>%
filter(!is.na(models_17_TEXT)) %>%
pull(models_17_TEXT)
rm(list=ls())
setwd("/mnt/D/Dropbox/sync/RHUL/stats_role/survey_march22")
library(tidyverse)
d <- read_csv('stats-survey-rhul_edit.csv')
str(d)
d %>%
filter(Finished==TRUE)
colnames(d)
d %>%
filter(Finished==TRUE) %>%
ggplot(x="Duration (in seconds)")+
geom_histogram()
d %>%
filter(Finished==TRUE) %>%
mutate(duration = "Duration (in seconds)") %>%
ggplot(aes(x="Duration (in seconds)"))+
geom_histogram()
d %>%
filter(Finished==TRUE) %>%
mutate(duration = as.numeric("Duration (in seconds)")) %>%
ggplot(aes(x="Duration (in seconds)"))+
geom_histogram()
d %>%
mutate(duration = as.numeric(d$"Duration (in seconds)"))
d %>%
mutate(duration = as.numeric(d$"Duration (in seconds)")) %>%
filter(Finished==TRUE) %>%
ggplot(aes(x=duration))+
geom_histogram()
d %>%
mutate(duration = as.numeric(d$"Duration (in seconds)")) %>%
pull(duration) %>% range()
colnames(d)
# 1
d %>%
filter(Finished==TRUE) %>%
select(starts_with('models_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('models_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
mutate(value_short = str_extract(value, pattern='^[^:\\.)]*')) %>%
# this works but regex whiz may do it much more elegantly
mutate(value_short = ifelse(str_detect(value_short,"\\((?=e)"),
str_sub(value_short,1,-1 -2),
value_short)) %>%
mutate(value_short = ifelse(str_detect(value_short,"\\("),
str_c(value_short,")"),
value_short)) %>%
group_by(value_short) %>%
summarise(N = length(value_short)) %>%
arrange(N) %>%
mutate(value_short=as_factor(value_short)) %>%
ggplot(aes(y=value_short, x=N))+
theme_gray(12) +
geom_col() +
labs(y="")
# 2
d %>%
filter(Finished==TRUE) %>%
select(open_topics) %>%
pull(open_topics)
# 2
d %>%
filter(Finished==TRUE) %>%
select(open_topics) %>%
filter(!is.na(open_topics)) %>%
pull(open_topics)
# 2
d %>%
filter(Finished==TRUE) %>%
select(open_topics) %>%
filter(!is.na(open_topics)) %>%
pull(open_topics)
# 2
d %>%
filter(Finished==TRUE) %>%
select(starts_with('models_') & contains('TEXT')) %>%
filter(!is.na(models_17_TEXT)) %>%
pull(models_17_TEXT)
colnames(d)
# 3
d %>%
filter(Finished==TRUE) %>%
select(starts_with('extra_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('extra_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
group_by(value) %>%
summarise(N = length(value)) %>%
arrange(N) %>%
mutate(value=as_factor(value)) %>%
ggplot(aes(y=value, x=N))+
theme_gray(12) +
geom_col() +
labs(y="")
# 3
d %>%
filter(Finished==TRUE) %>%
select(starts_with('extra_') & contains('TEXT')) %>%
filter(!is.na(extra_5_TEXT)) %>%
pull(extra_5_TEXT)
# role
d %>%
filter(Finished==TRUE) %>%
ggplot(aes(x=role))+
geom_histogram()
# role
d %>%
filter(Finished==TRUE) %>%
ggplot(aes(x=role))+
geom_histogram(stat=count)
# role
d %>%
filter(Finished==TRUE) %>%
ggplot(aes(x=role))+
geom_histogram(stat='count')
# role
d %>%
filter(Finished==TRUE) %>%
filter(!is.na(role)) %>%
ggplot(aes(x=role))+
geom_histogram(stat='count')
d %>%
filter(Finished==TRUE) %>%
filter(!is.na(open_format)) %>%
pull(open_format)
colnames(d)
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_'))
# 4 format
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('format_'),names_to = 'what') %>%
d %>%
filter(Finished==TRUE) %>%
filter(!is.na(open_format)) %>%
pull(open_format)
# 4 format
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('format_'),names_to = 'what')
?case_when
str_match("format_1","1")
str_detect("format_1","1")
# 4 format
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('format_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
mutate(what=case_when(
str_detect(value,"1") ~ "Short workshop",
str_detect(value,"2") ~ "Longer workshop",
str_detect(value,"3") ~ "one-on-one meeting",
str_detect(value,"4") ~ "shared resource",
str_detect(value,"5") ~ "collaboration"
) )
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('format_'),names_to = 'what') %>%
filter(!is.na(value))
# 4 format
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('format_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
mutate(what=case_when(
str_detect(what,"1") ~ "Short workshop",
str_detect(what,"2") ~ "Longer workshop",
str_detect(what,"3") ~ "one-on-one meeting",
str_detect(what,"4") ~ "shared resource",
str_detect(what,"5") ~ "collaboration"
) )
# 1
d %>%
filter(Finished==TRUE) %>%
select(starts_with('models_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('models_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
mutate(value_short = str_extract(value, pattern='^[^:\\.)]*')) %>%
# simplify labels (regex whiz may do it more elegantly)
mutate(value_short = ifelse(str_detect(value_short,"\\((?=e)"),
str_sub(value_short,1,-1 -2),
value_short)) %>%
mutate(value_short = ifelse(str_detect(value_short,"\\("),
str_c(value_short,")"),
value_short)) %>%
group_by(value_short) %>%
summarise(N = length(id)) %>%
arrange(N) %>%
mutate(value_short=as_factor(value_short)) %>%
ggplot(aes(y=value_short, x=N))+
theme_gray(12) +
geom_col() +
labs(y="")
# 4 format
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('format_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
mutate(what=case_when(
str_detect(what,"1") ~ "Short workshop",
str_detect(what,"2") ~ "Longer workshop",
str_detect(what,"3") ~ "one-on-one meeting",
str_detect(what,"4") ~ "shared resource",
str_detect(what,"5") ~ "collaboration"
) ) %>%
group_by(what, value) %>%
summarise(N = length(id))
# 4 format
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('format_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
mutate(what=case_when(
str_detect(what,"1") ~ "Short workshop",
str_detect(what,"2") ~ "Longer workshop",
str_detect(what,"3") ~ "one-on-one meeting",
str_detect(what,"4") ~ "shared resource",
str_detect(what,"5") ~ "collaboration"
) ) %>%
group_by(what, value) %>%
summarise(N = length(id)) %>%
ggplot(aes(x=value, y=N)) +
geom_col()+
facet_wrap(.~what, ncol=2)
# 4 format
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('format_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
mutate(what=case_when(
str_detect(what,"1") ~ "Short workshop",
str_detect(what,"2") ~ "Longer workshop",
str_detect(what,"3") ~ "one-on-one meeting",
str_detect(what,"4") ~ "shared resource",
str_detect(what,"5") ~ "collaboration"
) ) %>%
group_by(what, value) %>%
summarise(N = length(id)) %>%
ggplot(aes(x=value, y=N)) +
geom_col()+
facet_wrap(.~what, ncol=2) +
labs(x="")
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('format_'),names_to = 'what')
unique(d$format_1)
# 4 format
d %>%
filter(Finished==TRUE) %>%
select(starts_with('format_')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('format_'),names_to = 'what') %>%
mutate(value=factor(value, ordered=T, levels=c("Very unlikely",
"Unlikely",
"Unsure",
"Likely",
"Very likely"))) %>%
filter(!is.na(value)) %>%
mutate(what=case_when(
str_detect(what,"1") ~ "Short workshop",
str_detect(what,"2") ~ "Longer workshop",
str_detect(what,"3") ~ "one-on-one meeting",
str_detect(what,"4") ~ "shared resource",
str_detect(what,"5") ~ "collaboration"
) ) %>%
group_by(what, value) %>%
summarise(N = length(id)) %>%
ggplot(aes(x=value, y=N)) +
geom_col()+
facet_wrap(.~what, ncol=2) +
labs(x="")
rm(list=ls())
setwd("/mnt/D/Dropbox/sync/RHUL/stats_role/survey_march22")
library(tidyverse)
d <- read_csv('stats-survey-rhul_edit.csv')
d %>%
mutate(duration = as.numeric(d$"Duration (in seconds)")) %>%
filter(Finished==TRUE) %>%
ggplot(aes(x=duration))+
geom_histogram()
d %>%
mutate(duration = as.numeric(d$"Duration (in seconds)")) %>%
pull(duration) %>% range()
colnames(d)
d %>%
filter(Finished==TRUE) %>%
select(starts_with('extra_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('extra_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
group_by(value) %>%
summarise(N = length(value)) %>%
arrange(N) %>%
mutate(value=as_factor(value)) %>%
ggplot(aes(y=value, x=N))+
theme_gray(12) +
geom_col() +
labs(y="")
d %>%
filter(Finished==TRUE) %>% nrow()
d %>%
filter(Finished==TRUE) %>%
select(starts_with('extra_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('extra_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
group_by(value) %>%
summarise(N = length(value),
percentage = N/ntrow(.)*100) %>%
arrange(N) %>%
mutate(value=as_factor(value)) %>%
ggplot(aes(y=value, x=percentage ))+
theme_gray(12) +
geom_col() +
labs(y="",x="% of respondents")
d %>%
filter(Finished==TRUE) %>%
select(starts_with('extra_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('extra_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
group_by(value) %>%
summarise(N = length(value),
percentage = N/nrow(.)*100) %>%
arrange(N) %>%
mutate(value=as_factor(value)) %>%
ggplot(aes(y=value, x=percentage ))+
theme_gray(12) +
geom_col() +
labs(y="",x="% of respondents")
d %>%
filter(Finished==TRUE) %>%
select(starts_with('extra_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('extra_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
group_by(value) %>%
summarise(N = length(value),
percentage = N/nrow(.)*100) %>%
arrange(N) %>%
mutate(value=as_factor(value)) %>%
ggplot(aes(y=value, x=percentage ))+
theme_gray(12) +
scale_x_continuous(breaks = seq(0,100,5))
d %>%
filter(Finished==TRUE) %>%
select(starts_with('extra_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('extra_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
group_by(value) %>%
summarise(N = length(value),
percentage = N/nrow(.)*100) %>%
arrange(N) %>%
mutate(value=as_factor(value)) %>%
ggplot(aes(y=value, x=percentage ))+
theme_gray(12) +
scale_x_continuous(breaks = seq(0,100,5))+
geom_col() +
labs(y="",x="% of respondents")
d %>%
filter(Finished==TRUE) %>%
select(starts_with('extra_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('extra_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
group_by(value) %>%
summarise(N = length(value),
percentage = N/nrow(.)*100) %>%
arrange(N) %>%
mutate(value=as_factor(value)) %>%
ggplot(aes(y=value, x=percentage ))+
theme_gray(12) +
scale_x_continuous(breaks = seq(0,100,2))+
geom_col() +
labs(y="",x="% of respondents")
d %>%
filter(Finished==TRUE) %>%
select(starts_with('extra_') & !contains('TEXT')) %>%
mutate(id = 1:nrow(.)) %>%
pivot_longer(starts_with('extra_'),names_to = 'what') %>%
filter(!is.na(value)) %>%
filter(value!="Other (please specify)") %>%
group_by(value) %>%
summarise(N = length(value),
percentage = N/nrow(.)*100) %>%
arrange(N) %>%
mutate(value=as_factor(value)) %>%
ggplot(aes(y=value, x=percentage ))+
theme_gray(12) +
scale_x_continuous(breaks = seq(0,100,5))+
geom_col() +
labs(y="",x="% of respondents")
#!/usr/bin/env Rscript
rm(list=ls())
setwd("/mnt/sda2/matteoHDD/git_local_HDD/RHUL-stats/RHUL-stats-notebook")
# bookdown::serve_book(dir="/mnt/sda2/matteoHDD/git_local_HDD/RHUL-stats/RHUL-stats-notebook",
#                      output_dir = "../docs")
# servr::daemon_stop(3)
bookdown::render_book("index.Rmd", "bookdown::bs4_book",
output_dir = "../docs",
new_session = TRUE)
bookdown::render_book("index.Rmd", "bookdown::pdf_book",
output_dir = "../",
new_session = TRUE)
options(bookdown.clean_book = TRUE)
bookdown::clean_book()
setwd("/mnt/sda2/matteoHDD/git_local_HDD/RHUL-stats/")
system("rm *.md")
system("rm *.tex")
system("git add -A")
system('git commit -m "update (auto)"')
system("git push origin main")
